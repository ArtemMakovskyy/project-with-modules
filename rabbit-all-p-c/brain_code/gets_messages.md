## ‚úÖ –ö–æ–≥–¥–∞ –í–´–ö–õ–Æ–ß–ï–ù–ù–´–ï —Å–µ—Ä–≤–∏—Å—ã –ü–û–õ–£–ß–ê–¢ —Å–æ–æ–±—â–µ–Ω–∏–µ

–í—Å–µ —É—Å–ª–æ–≤–∏—è –Ω–∏–∂–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω—ã üëá

### 1Ô∏è‚É£ –û—á–µ—Ä–µ–¥—å —Å—É—â–µ—Å—Ç–≤—É–µ—Ç **–¥–æ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è**

(—Å–æ–∑–¥–∞–Ω–∞ –∑–∞—Ä–∞–Ω–µ–µ –∏–ª–∏ auto-declare)

### 2Ô∏è‚É£ –û—á–µ—Ä–µ–¥—å **durable**

`new Queue("q.order.notification", true);`

### 3Ô∏è‚É£ –°–æ–æ–±—â–µ–Ω–∏–µ **persistent**

`msg.getMessageProperties()    .setDeliveryMode(MessageDeliveryMode.PERSISTENT);`

### 4Ô∏è‚É£ –û—á–µ—Ä–µ–¥—å **–ù–ï auto-delete**

`new Queue("q.order.notification", true, false, false);`

### 5Ô∏è‚É£ –û—á–µ—Ä–µ–¥—å **–ù–ï exclusive**

`exclusive = false`

---

### üü¢ –¢–æ–≥–¥–∞ —Å—Ü–µ–Ω–∞—Ä–∏–π —Ç–∞–∫–æ–π:

`Producer –æ—Ç–ø—Ä–∞–≤–∏–ª —Å–æ–æ–±—â–µ–Ω–∏–µ ‚Üì RabbitMQ –ø–æ–ª–æ–∂–∏–ª –µ–≥–æ –≤ 10 –æ—á–µ—Ä–µ–¥–µ–π ‚Üì 5 —Å–µ—Ä–≤–∏—Å–æ–≤ –æ–Ω–ª–∞–π–Ω ‚Üí –ø–æ–ª—É—á–∏–ª–∏ —Å—Ä–∞–∑—É 5 —Å–µ—Ä–≤–∏—Å–æ–≤ –æ—Ñ—Ñ–ª–∞–π–Ω ‚Üí —Å–æ–æ–±—â–µ–Ω–∏—è –ª–µ–∂–∞—Ç –≤ –æ—á–µ—Ä–µ–¥—è—Ö ‚Üì –°–µ—Ä–≤–∏—Å—ã –ø–æ–¥–Ω—è–ª–∏—Å—å ‚Üí –ø–æ–ª—É—á–∏–ª–∏ –í–°–ï —Å–æ–æ–±—â–µ–Ω–∏—è`

‚úî **–î–ê, –ø–æ–ª—É—á–∞—Ç**

---

## ‚ùå –ö–æ–≥–¥–∞ –≤—ã–∫–ª—é—á–µ–Ω–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã –ù–ï –ø–æ–ª—É—á–∞—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ

### ‚ùå –û—á–µ—Ä–µ–¥—å –±—ã–ª–∞:

- `auto-delete = true`
    
- `exclusive = true`
    
- **–Ω–µ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–ª–∞** –Ω–∞ –º–æ–º–µ–Ω—Ç –æ—Ç–ø—Ä–∞–≤–∫–∏
    

### ‚ùå –°–æ–æ–±—â–µ–Ω–∏–µ –±—ã–ª–æ:

- `non-persistent`
    
- –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ `non-durable exchange`
    

### ‚ùå –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è:

- `fanout` + –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –æ—á–µ—Ä–µ–¥–∏
    
- `@RabbitListener` —Å auto-delete queue
    

---

## üß™ –¢–∏–ø–∏—á–Ω—ã–π –∞–Ω—Ç–∏–ø—Ä–∏–º–µ—Ä (—á–∞—Å—Ç–∞—è –æ—à–∏–±–∫–∞)

`@RabbitListener(queuesToDeclare = @Queue(     value = "q.temp",     autoDelete = "true" ))`

üìå –û—á–µ—Ä–µ–¥—å —É–¥–∞–ª–∏—Ç—Å—è, –∫–∞–∫ —Ç–æ–ª—å–∫–æ —Å–µ—Ä–≤–∏—Å –≤—ã–∫–ª—é—á–∏—Ç—Å—è ‚Üí  
—Å–æ–æ–±—â–µ–Ω–∏—è **–ø–æ—Ç–µ—Ä—è–Ω—ã –Ω–∞–≤—Å–µ–≥–¥–∞**.

---

## üß† Production best practice (–º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã)

### ‚úÖ –î–µ–ª–∞–π –í–°–ï –æ—á–µ—Ä–µ–¥–∏:

`durable = true autoDelete = false exclusive = false`

### ‚úÖ –°–æ–æ–±—â–µ–Ω–∏—è:

`deliveryMode = PERSISTENT`

### ‚úÖ –î–ª—è –æ—à–∏–±–æ–∫:

- DLQ
    
- retries
    
- TTL
    

---

## üìã –ö—Ä–∞—Ç–∫–∞—è —Ç–∞–±–ª–∏—Ü–∞

|–£—Å–ª–æ–≤–∏–µ|–ü–æ–ª—É—á–∞—Ç?|
|---|---|
|durable queue + persistent msg|‚úÖ|
|—Å–µ—Ä–≤–∏—Å –±—ã–ª –æ—Ñ—Ñ–ª–∞–π–Ω|‚úÖ|
|auto-delete queue|‚ùå|
|queue –Ω–µ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–ª–∞|‚ùå|
|non-persistent msg|‚ùå|
|fanout + temp queue|‚ùå|

---

## üß† –í–∞–∂–Ω—ã–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π –≤—ã–≤–æ–¥

> RabbitMQ ‚Äî **delivery broker**, –Ω–µ event log.

–ï—Å–ª–∏ —Ç–µ–±–µ –Ω—É–∂–Ω–æ:

- –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏ —Å–æ–±—ã—Ç–∏—è –∑–∞ –Ω–µ–¥–µ–ª—é
    
- –ø–æ–¥–Ω—è—Ç—å —Å–µ—Ä–≤–∏—Å –∏ –ø–µ—Ä–µ—á–∏—Ç–∞—Ç—å –≤—Å—ë
    

‚û° **—ç—Ç–æ Kafka, –Ω–µ RabbitMQ**

---

## üîë –§–æ—Ä–º—É–ª–∞ –¥–ª—è –∑–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è

> **–ù–µ —Å–µ—Ä–≤–∏—Å—ã –ø–æ–ª—É—á–∞—é—Ç —Å–æ–æ–±—â–µ–Ω–∏—è ‚Äî –æ—á–µ—Ä–µ–¥–∏ –ø–æ–ª—É—á–∞—é—Ç —Å–æ–æ–±—â–µ–Ω–∏—è.**

–°–µ—Ä–≤–∏—Å ‚Äî —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ consumer –æ—á–µ—Ä–µ–¥–∏.